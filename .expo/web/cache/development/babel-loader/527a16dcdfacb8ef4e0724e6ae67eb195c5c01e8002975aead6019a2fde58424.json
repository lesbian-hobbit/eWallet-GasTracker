{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { firebase } from \"../firebase\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar Logs = function Logs() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    logInfo = _useState2[0],\n    setLogs = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  useEffect(function () {\n    var todoRef = firebase.firestore().collection('users').doc('LlsVwIQz9hMMDtHgQLlT').collection('Logs');\n    var unsubscribe = todoRef.onSnapshot(function (querySnapshot) {\n      var logs = [];\n      querySnapshot.forEach(function (doc) {\n        var _doc$data = doc.data(),\n          ReceiverUid = _doc$data.ReceiverUid,\n          Timestamp = _doc$data.Timestamp,\n          transactions = _doc$data.transactions;\n        var formattedTimestamp = Timestamp.toDate().toLocaleString();\n        logs.push({\n          id: doc.id,\n          ReceiverUid: ReceiverUid,\n          Timestamp: formattedTimestamp,\n          transactions: transactions\n        });\n      });\n      logs.sort(function (a, b) {\n        return b.Timestamp - a.Timestamp;\n      });\n      setLogs(logs);\n      setLoading(false);\n    });\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  var renderItem = function renderItem(_ref) {\n    var item = _ref.item;\n    var isRecent = isRecentTransaction(item);\n    return _jsx(View, {\n      style: [styles.logItem, isRecent && styles.recentLogItem],\n      children: _jsxs(Text, {\n        style: [styles.logText, isRecent && styles.recentLogText],\n        children: [\"Sent: $\", item.transactions, \" To \", item.ReceiverUid, \" in \", item.Timestamp]\n      })\n    });\n  };\n  var isRecentTransaction = function isRecentTransaction(item) {\n    var currentTime = new Date();\n    var logTime = new Date(item.Timestamp);\n    var diffInSeconds = Math.abs((currentTime - logTime) / 1000);\n    var RECENT_THRESHOLD = 300;\n    return diffInSeconds <= RECENT_THRESHOLD;\n  };\n  return _jsx(View, {\n    style: styles.container,\n    children: loading ? _jsx(ActivityIndicator, {\n      size: \"large\",\n      color: \"#0000ff\"\n    }) : _jsx(FlatList, {\n      data: logInfo,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      renderItem: renderItem,\n      inverted: true\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    paddingHorizontal: 16\n  },\n  logItem: {\n    marginBottom: 10,\n    padding: 10,\n    backgroundColor: '#f0f0f0',\n    borderRadius: 5\n  },\n  recentLogItem: {\n    backgroundColor: '#e4f0ff'\n  },\n  logText: {\n    fontSize: 16\n  },\n  recentLogText: {\n    fontWeight: 'bold'\n  }\n});\nexport default Logs;","map":{"version":3,"names":["React","useState","useEffect","View","Text","FlatList","ActivityIndicator","StyleSheet","Alert","firebase","jsxs","_jsxs","jsx","_jsx","Logs","_useState","_useState2","_slicedToArray","logInfo","setLogs","_useState3","_useState4","loading","setLoading","todoRef","firestore","collection","doc","unsubscribe","onSnapshot","querySnapshot","logs","forEach","_doc$data","data","ReceiverUid","Timestamp","transactions","formattedTimestamp","toDate","toLocaleString","push","id","sort","a","b","renderItem","_ref","item","isRecent","isRecentTransaction","style","styles","logItem","recentLogItem","children","logText","recentLogText","currentTime","Date","logTime","diffInSeconds","Math","abs","RECENT_THRESHOLD","container","size","color","keyExtractor","inverted","create","flex","justifyContent","paddingHorizontal","marginBottom","padding","backgroundColor","borderRadius","fontSize","fontWeight"],"sources":["C:/Users/mamit/OneDrive/Desktop/mobile_Team_Progress_june15/screens/Logs.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, FlatList, ActivityIndicator, StyleSheet, Alert } from 'react-native';\r\nimport { firebase } from '../firebase';\r\n\r\nconst Logs = () => {\r\n  const [logInfo, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const todoRef = firebase\r\n      .firestore()\r\n      .collection('users')\r\n      .doc('LlsVwIQz9hMMDtHgQLlT')\r\n      .collection('Logs');\r\n\r\n    const unsubscribe = todoRef.onSnapshot((querySnapshot) => {\r\n      const logs = [];\r\n      querySnapshot.forEach((doc) => {\r\n        const { ReceiverUid, Timestamp, transactions } = doc.data();\r\n        const formattedTimestamp = Timestamp.toDate().toLocaleString();\r\n        logs.push({\r\n          id: doc.id,\r\n          ReceiverUid,\r\n          Timestamp: formattedTimestamp,\r\n          transactions,\r\n        });\r\n      });\r\n      // Sort logs array based on timestamp in descending order\r\n      logs.sort((a, b) => b.Timestamp - a.Timestamp);\r\n      setLogs(logs);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const renderItem = ({ item }) => {\r\n    const isRecent = isRecentTransaction(item);\r\n    return (\r\n      <View style={[styles.logItem, isRecent && styles.recentLogItem]}>\r\n        <Text style={[styles.logText, isRecent && styles.recentLogText]}>\r\n          Sent: ${item.transactions} To {item.ReceiverUid} in {item.Timestamp}\r\n        </Text>\r\n      </View>\r\n    );\r\n  };\r\n\r\n  const isRecentTransaction = (item) => {\r\n    const currentTime = new Date();\r\n    const logTime = new Date(item.Timestamp);\r\n    const diffInSeconds = Math.abs((currentTime - logTime) / 1000);\r\n    const RECENT_THRESHOLD = 300; // 5 minutes (adjust as needed)\r\n\r\n    return diffInSeconds <= RECENT_THRESHOLD;\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {loading ? (\r\n        <ActivityIndicator size=\"large\" color=\"#0000ff\" />\r\n      ) : (\r\n        <FlatList\r\n          data={logInfo}\r\n          keyExtractor={(item) => item.id}\r\n          renderItem={renderItem}\r\n          inverted // Render items in reverse order to display recent transactions at the top\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    paddingHorizontal: 16,\r\n  },\r\n  logItem: {\r\n    marginBottom: 10,\r\n    padding: 10,\r\n    backgroundColor: '#f0f0f0',\r\n    borderRadius: 5,\r\n  },\r\n  recentLogItem: {\r\n    backgroundColor: '#e4f0ff', // Light blue color for recent transactions\r\n  },\r\n  logText: {\r\n    fontSize: 16,\r\n  },\r\n  recentLogText: {\r\n    fontWeight: 'bold', // Bold text for recent transactions\r\n  },\r\n});\r\n\r\nexport default Logs;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}