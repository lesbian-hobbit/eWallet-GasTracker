{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { firebase } from \"../firebase\";\nimport { collection, doc, query, orderBy, getDocs } from 'firebase/firestore';\nimport { format } from 'date-fns';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Logs = function Logs() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    logInfo = _useState2[0],\n    setLogs = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  useEffect(function () {\n    var fetchLogs = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var logsRef = collection(firebase.firestore(), 'users', 'LlsVwIQz9hMMDtHgQLlT', 'Logs');\n          var logsQuery = query(logsRef, orderBy('Timestamp', 'desc'));\n          var querySnapshot = yield getDocs(logsQuery);\n          var logsData = querySnapshot.docs.map(function (doc) {\n            var _doc$data = doc.data(),\n              ReceiverUid = _doc$data.ReceiverUid,\n              Timestamp = _doc$data.Timestamp,\n              transactions = _doc$data.transactions;\n            var formattedTimestamp = format(Timestamp.toDate(), 'dd/MM/yyyy hh:mm:ss a');\n            return {\n              id: doc.id,\n              ReceiverUid: ReceiverUid,\n              Timestamp: formattedTimestamp,\n              transactions: transactions\n            };\n          });\n          setLogs(logsData);\n          setLoading(false);\n        } catch (error) {\n          console.log('Error fetching logs: ', error);\n          setLoading(false);\n        }\n      });\n      return function fetchLogs() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    fetchLogs();\n  }, []);\n  if (loading) {\n    return _jsx(View, {\n      style: styles.loadingContainer,\n      children: _jsx(ActivityIndicator, {\n        size: \"large\",\n        color: \"#0000ff\"\n      })\n    });\n  }\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(FlatList, {\n      data: logInfo,\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item;\n        return _jsxs(Text, {\n          style: styles.logText,\n          children: [\"Sent: $\", item.transactions, \" To \", item.ReceiverUid, \" on \", item.Timestamp]\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      contentContainerStyle: styles.listContentContainer\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingHorizontal: 16,\n    paddingTop: 16\n  },\n  loadingContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  logText: {\n    fontSize: 16,\n    marginBottom: 8\n  },\n  listContentContainer: {\n    paddingBottom: 16\n  }\n});\nexport default Logs;","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","FlatList","firebase","collection","doc","query","orderBy","getDocs","format","jsx","_jsx","jsxs","_jsxs","Logs","_useState","_useState2","_slicedToArray","logInfo","setLogs","_useState3","_useState4","loading","setLoading","fetchLogs","_ref","_asyncToGenerator","logsRef","firestore","logsQuery","querySnapshot","logsData","docs","map","_doc$data","data","ReceiverUid","Timestamp","transactions","formattedTimestamp","toDate","id","error","console","log","apply","arguments","style","styles","loadingContainer","children","ActivityIndicator","size","color","container","renderItem","_ref2","item","logText","keyExtractor","contentContainerStyle","listContentContainer","create","flex","paddingHorizontal","paddingTop","alignItems","justifyContent","fontSize","marginBottom","paddingBottom"],"sources":["C:/Users/mamit/OneDrive/Desktop/mobile_Team_Progress_june15/screens/Logs.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, FlatList } from 'react-native';\r\nimport { firebase } from '../firebase';\r\nimport { collection, doc, query, orderBy, getDocs } from 'firebase/firestore';\r\nimport { format } from 'date-fns';\r\n\r\nconst Logs = () => {\r\n  const [logInfo, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchLogs = async () => {\r\n      try {\r\n        const logsRef = collection(firebase.firestore(), 'users', 'LlsVwIQz9hMMDtHgQLlT', 'Logs');\r\n        const logsQuery = query(logsRef, orderBy('Timestamp', 'desc'));\r\n        const querySnapshot = await getDocs(logsQuery);\r\n\r\n        const logsData = querySnapshot.docs.map((doc) => {\r\n          const { ReceiverUid, Timestamp, transactions } = doc.data();\r\n          const formattedTimestamp = format(Timestamp.toDate(), 'dd/MM/yyyy hh:mm:ss a');\r\n          return {\r\n            id: doc.id,\r\n            ReceiverUid,\r\n            Timestamp: formattedTimestamp,\r\n            transactions,\r\n          };\r\n        });\r\n\r\n        setLogs(logsData);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.log('Error fetching logs: ', error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchLogs();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#0000ff\" />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <FlatList\r\n        data={logInfo}\r\n        renderItem={({ item }) => (\r\n          <Text style={styles.logText}>\r\n            Sent: ${item.transactions} To {item.ReceiverUid} on {item.Timestamp}\r\n          </Text>\r\n        )}\r\n        keyExtractor={(item) => item.id}\r\n        contentContainerStyle={styles.listContentContainer}\r\n      />\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    paddingHorizontal: 16,\r\n    paddingTop: 16,\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  logText: {\r\n    fontSize: 16,\r\n    marginBottom: 8,\r\n  },\r\n  listContentContainer: {\r\n    paddingBottom: 16,\r\n  },\r\n});\r\n\r\nexport default Logs;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}