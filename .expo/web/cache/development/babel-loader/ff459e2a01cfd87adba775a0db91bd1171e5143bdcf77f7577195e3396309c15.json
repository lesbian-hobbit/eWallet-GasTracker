{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport { useNavigation } from '@react-navigation/core';\nimport { auth, firebase } from \"../firebase\";\nimport { onSnapshot, orderBy, addDoc, collection } from 'firebase/firestore';\nimport { Notifications } from 'expo';\nimport * as Permissions from 'expo-permissions';\nimport { Color, FontFamily } from \"../GlobalStyles\";\nimport { getExpoPushTokenAsync } from 'expo-notifications';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar NotificationsScreen = function NotificationsScreen() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    logInfo = _useState2[0],\n    setLogs = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedTransaction = _useState4[0],\n    setSelectedTransaction = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    modalVisible = _useState6[0],\n    setModalVisible = _useState6[1];\n  var navigation = useNavigation();\n  var onPress = function onPress() {\n    navigation.navigate('Main');\n  };\n  var openModal = function openModal(transaction) {\n    setSelectedTransaction(transaction);\n    setModalVisible(true);\n  };\n  var closeModal = function closeModal() {\n    setSelectedTransaction(null);\n    setModalVisible(false);\n  };\n  useEffect(function () {\n    var user = auth.currentUser.uid;\n    if (user) {\n      var uid = user;\n      var todoRef = firebase.firestore().collection('users').doc(uid).collection('notes').doc('messages').collection('receivedMessages').orderBy('Timestamp', 'desc');\n      var unsubscribe = onSnapshot(todoRef, function (querySnapshot) {\n        var logs = querySnapshot.docs.map(function (doc) {\n          var _doc$data = doc.data(),\n            ReceiverUid = _doc$data.ReceiverUid,\n            Timestamp = _doc$data.Timestamp,\n            transactions = _doc$data.transactions,\n            Sender = _doc$data.Sender,\n            SenderEmail = _doc$data.SenderEmail,\n            Note = _doc$data.Note;\n          var formattedTimestamp = '';\n          if (Timestamp && Timestamp.toDate) {\n            formattedTimestamp = Timestamp.toDate().toLocaleString();\n          }\n          return {\n            id: doc.id,\n            ReceiverUid: ReceiverUid,\n            Timestamp: formattedTimestamp,\n            transactions: transactions,\n            Sender: Sender,\n            SenderEmail: SenderEmail,\n            Note: Note\n          };\n        });\n        setLogs(logs);\n      });\n      return function () {\n        return unsubscribe();\n      };\n    }\n  }, []);\n  var sendNotification = function () {\n    var _ref = _asyncToGenerator(function* (transactions, senderEmail, note) {\n      var localNotification = {\n        title: 'New Message',\n        body: \"You just received \\u20B1\" + transactions + \" from \" + senderEmail + (note ? \" with a note: \" + note : ''),\n        android: {\n          sound: true\n        },\n        ios: {\n          sound: true\n        }\n      };\n      var _yield$Permissions$as = yield Permissions.askAsync(Permissions.NOTIFICATIONS),\n        status = _yield$Permissions$as.status;\n      if (status === 'granted') {\n        yield Notifications.presentNotificationAsync(localNotification);\n      } else {\n        console.log('Permission not granted for notifications.');\n      }\n    });\n    return function sendNotification(_x, _x2, _x3) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var sendPushNotification = function () {\n    var _ref2 = _asyncToGenerator(function* (message) {\n      var response = yield fetch('https://exp.host/--/api/v2/push/send', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(message)\n      });\n      var result = yield response.json();\n      console.log('Notification result:', result);\n    });\n    return function sendPushNotification(_x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    var user = auth.currentUser.uid;\n    if (user) {\n      var uid = user;\n      var receivedMessagesRef = firebase.firestore().collection('users').doc(uid).collection('notes').doc('messages').collection('receivedMessages');\n      var unsubscribe = onSnapshot(receivedMessagesRef, function (querySnapshot) {\n        querySnapshot.docChanges().forEach(function (change) {\n          if (change.type === 'added') {\n            var _change$doc$data = change.doc.data(),\n              transactions = _change$doc$data.transactions,\n              SenderEmail = _change$doc$data.SenderEmail,\n              Note = _change$doc$data.Note;\n            sendNotification(transactions, SenderEmail, Note);\n            sendPushNotification({\n              message: 'New message'\n            });\n          }\n        });\n      });\n      return function () {\n        return unsubscribe();\n      };\n    }\n  }, []);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(FlatList, {\n      showsVerticalScrollIndicator: false,\n      style: styles.flatlistContainer,\n      data: logInfo,\n      renderItem: function renderItem(_ref3) {\n        var item = _ref3.item,\n          index = _ref3.index;\n        return _jsxs(TouchableOpacity, {\n          style: [styles.logItem, index === 0 && styles.highlightedLog],\n          onPress: function onPress() {\n            return openModal(item);\n          },\n          children: [_jsx(Text, {}, index), _jsxs(Text, {\n            style: styles.pesoText,\n            children: [\"Received from \", item.SenderEmail, item.Note ? \"\\n Note:\\n \" + item.Note : '']\n          }), _jsxs(Text, {\n            style: styles.pesoMoney,\n            children: [\"+\\u20B1\", item.transactions]\n          }), _jsx(Text, {\n            style: styles.timestampText,\n            children: item.Timestamp\n          })]\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      contentContainerStyle: styles.listContainer\n    }), _jsx(View, {\n      style: styles.receivedButton,\n      children: _jsx(TouchableOpacity, {\n        style: styles.ButtonContainer,\n        onPress: onPress,\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \"Go Back Home\"\n        })\n      })\n    }), _jsx(Modal, {\n      visible: modalVisible,\n      animationType: \"slide\",\n      transparent: true,\n      onRequestClose: closeModal,\n      children: _jsx(View, {\n        style: styles.modalContainer,\n        children: selectedTransaction && _jsxs(View, {\n          style: styles.transactionModal,\n          children: [_jsx(Text, {\n            style: styles.modalText,\n            children: \"Transaction Details\"\n          }), _jsxs(Text, {\n            style: styles.modTrans,\n            children: [\"Transaction: \\u20B1\", selectedTransaction.transactions]\n          }), _jsxs(Text, {\n            style: styles.modTrans,\n            children: [\"Sender: \", selectedTransaction.SenderEmail]\n          }), _jsxs(Text, {\n            style: styles.modTrans,\n            children: [\"Time: \", selectedTransaction.Timestamp]\n          }), _jsxs(Text, {\n            style: styles.modTrans,\n            children: [\"Note: \", selectedTransaction.Note]\n          }), _jsx(TouchableOpacity, {\n            style: styles.closeButton,\n            onPress: closeModal,\n            children: _jsx(Text, {\n              style: styles.closeButtonText,\n              children: \"Close\"\n            })\n          })]\n        })\n      })\n    })]\n  });\n};\nexport default NotificationsScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    backgroundColor: Color.blackModePrimaryDark,\n    justifyContent: \"center\",\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n  },\n  ButtonContainer: {\n    marginHorizontal: 80,\n    backgroundColor: \"#7B61FF\",\n    paddingVertical: 10,\n    borderRadius: 15,\n    marginTop: 15\n  },\n  buttonText: {\n    color: \"white\",\n    fontSize: 16,\n    fontFamily: FontFamily.poppinsMedium,\n    textAlign: \"center\"\n  },\n  receivedButton: {\n    padding: 10,\n    marginBottom: 10\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  flatlistContainer: {\n    padding: 20\n  },\n  listContainer: {\n    paddingBottom: 16\n  },\n  logItem: {\n    backgroundColor: 'rgba(255, 255, 255, 0.15)',\n    padding: 16,\n    marginBottom: 8,\n    borderRadius: 8,\n    elevation: 2\n  },\n  highlightedLog: {\n    backgroundColor: '#7B61FF',\n    borderWidth: 2,\n    borderColor: '#FFA500'\n  },\n  image: {\n    flex: 1,\n    justifyContent: 'center'\n  },\n  logText: {\n    fontSize: 16,\n    marginBottom: 8,\n    fontWeight: 'bold'\n  },\n  timestampText: {\n    fontSize: 12,\n    color: 'white',\n    alignSelf: 'flex-end'\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\n  },\n  transactionModal: {\n    backgroundColor: 'white',\n    padding: 20,\n    borderRadius: 8,\n    width: '80%'\n  },\n  modalText: {\n    fontSize: 18,\n    marginBottom: 10,\n    fontFamily: FontFamily.poppinsBold\n  },\n  closeButton: {\n    marginTop: 20,\n    backgroundColor: '#7B61FF',\n    padding: 10,\n    borderRadius: 8,\n    alignSelf: 'flex-end'\n  },\n  closeButtonText: {\n    color: 'white',\n    fontFamily: FontFamily.poppinsMedium\n  },\n  pesoText: {\n    color: \"white\",\n    fontFamily: FontFamily.poppinsMedium\n  },\n  pesoMoney: {\n    color: '#7CFC00',\n    alignSelf: 'flex-end',\n    fontSize: 20\n  },\n  modTrans: {\n    fontFamily: FontFamily.poppinsMedium,\n    fontSize: 13\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","FlatList","StyleSheet","TouchableOpacity","ImageBackground","Modal","useNavigation","auth","firebase","onSnapshot","orderBy","addDoc","collection","Notifications","Permissions","Color","FontFamily","getExpoPushTokenAsync","jsx","_jsx","jsxs","_jsxs","NotificationsScreen","_useState","_useState2","_slicedToArray","logInfo","setLogs","_useState3","_useState4","selectedTransaction","setSelectedTransaction","_useState5","_useState6","modalVisible","setModalVisible","navigation","onPress","navigate","openModal","transaction","closeModal","user","currentUser","uid","todoRef","firestore","doc","unsubscribe","querySnapshot","logs","docs","map","_doc$data","data","ReceiverUid","Timestamp","transactions","Sender","SenderEmail","Note","formattedTimestamp","toDate","toLocaleString","id","sendNotification","_ref","_asyncToGenerator","senderEmail","note","localNotification","title","body","android","sound","ios","_yield$Permissions$as","askAsync","NOTIFICATIONS","status","presentNotificationAsync","console","log","_x","_x2","_x3","apply","arguments","sendPushNotification","_ref2","message","response","fetch","method","headers","Accept","JSON","stringify","result","json","_x4","receivedMessagesRef","docChanges","forEach","change","type","_change$doc$data","style","styles","container","children","showsVerticalScrollIndicator","flatlistContainer","renderItem","_ref3","item","index","logItem","highlightedLog","pesoText","pesoMoney","timestampText","keyExtractor","contentContainerStyle","listContainer","receivedButton","ButtonContainer","buttonText","visible","animationType","transparent","onRequestClose","modalContainer","transactionModal","modalText","modTrans","closeButton","closeButtonText","create","flexDirection","justifyContent","backgroundColor","blackModePrimaryDark","position","top","bottom","left","right","marginHorizontal","paddingVertical","borderRadius","marginTop","color","fontSize","fontFamily","poppinsMedium","textAlign","padding","marginBottom","loadingContainer","flex","alignItems","paddingBottom","elevation","borderWidth","borderColor","image","logText","fontWeight","alignSelf","width","poppinsBold"],"sources":["C:/Users/User/Pictures/E-Wallet-Project/screens/Notifications.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, FlatList, StyleSheet, TouchableOpacity, ImageBackground, Modal } from 'react-native';\r\nimport { useNavigation } from '@react-navigation/core';\r\nimport { auth, firebase } from '../firebase';\r\nimport { onSnapshot, orderBy, addDoc, collection } from 'firebase/firestore';\r\nimport { Notifications } from 'expo';\r\nimport * as Permissions from 'expo-permissions';\r\nimport {Color, FontFamily} from '../GlobalStyles'\r\nimport { getExpoPushTokenAsync } from 'expo-notifications';\r\n\r\nconst NotificationsScreen = () => {\r\n  const [logInfo, setLogs] = useState([]);\r\n  const [selectedTransaction, setSelectedTransaction] = useState(null);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const navigation = useNavigation();\r\n\r\n  const onPress = () => {\r\n    navigation.navigate('Main');\r\n  };\r\n\r\n  const openModal = (transaction) => {\r\n    setSelectedTransaction(transaction);\r\n    setModalVisible(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setSelectedTransaction(null);\r\n    setModalVisible(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const user = auth.currentUser.uid;\r\n    if (user) {\r\n      const uid = user;\r\n      const todoRef = firebase\r\n        .firestore()\r\n        .collection('users')\r\n        .doc(uid)\r\n        .collection('notes')\r\n        .doc('messages')\r\n        .collection('receivedMessages')\r\n        .orderBy('Timestamp', 'desc'); // Order the documents by timestamp in descending order\r\n      const unsubscribe = onSnapshot(todoRef, (querySnapshot) => {\r\n        const logs = querySnapshot.docs.map((doc) => {\r\n          const { ReceiverUid, Timestamp, transactions, Sender, SenderEmail, Note } = doc.data();\r\n          let formattedTimestamp = '';\r\n          if (Timestamp && Timestamp.toDate) {\r\n            formattedTimestamp = Timestamp.toDate().toLocaleString();\r\n          }\r\n          return {\r\n            id: doc.id,\r\n            ReceiverUid,\r\n            Timestamp: formattedTimestamp,\r\n            transactions,\r\n            Sender,\r\n            SenderEmail,\r\n            Note\r\n          };\r\n        });\r\n        setLogs(logs);\r\n      });\r\n\r\n      return () => unsubscribe();\r\n    }\r\n  }, []);\r\n\r\n \r\nconst sendNotification = async (transactions, senderEmail, note) => {\r\n  const localNotification = {\r\n    // to: ExpoPushToken,\r\n    title: 'New Message',\r\n    body: `You just received ₱${transactions} from ${senderEmail}${note ? ` with a note: ${note}` : ''}`,\r\n    android: {\r\n      sound: true,\r\n    },\r\n    ios: {\r\n      sound: true,\r\n    },\r\n  };\r\n\r\n  const { status } = await Permissions.askAsync(Permissions.NOTIFICATIONS);\r\n  if (status === 'granted') {\r\n    await Notifications.presentNotificationAsync(localNotification);\r\n  } else {\r\n    console.log('Permission not granted for notifications.');\r\n  }\r\n};\r\n\r\n  const sendPushNotification = async (message) => {\r\n    const response = await fetch('https://exp.host/--/api/v2/push/send', {\r\n      method: 'POST',\r\n      headers: {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(message),\r\n    });\r\n\r\n    const result = await response.json();\r\n    console.log('Notification result:', result);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const user = auth.currentUser.uid;\r\n    if (user) {\r\n      const uid = user;\r\n      const receivedMessagesRef = firebase\r\n        .firestore()\r\n        .collection('users')\r\n        .doc(uid)\r\n        .collection('notes')\r\n        .doc('messages')\r\n        .collection('receivedMessages');\r\n\r\n      const unsubscribe = onSnapshot(receivedMessagesRef, (querySnapshot) => {\r\n        querySnapshot.docChanges().forEach((change) => {\r\n          if (change.type === 'added') {\r\n            const { transactions, SenderEmail, Note } = change.doc.data();\r\n            sendNotification(transactions, SenderEmail, Note);\r\n            sendPushNotification({ message: 'New message' }); // Example of sending push notification\r\n          }\r\n        });\r\n      });\r\n\r\n      return () => unsubscribe();\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <FlatList\r\n        showsVerticalScrollIndicator={false}\r\n        style={styles.flatlistContainer}\r\n        data={logInfo}\r\n        renderItem={({ item, index }) => (\r\n          <TouchableOpacity\r\n            style={[styles.logItem, index === 0 && styles.highlightedLog]}\r\n            onPress={() => openModal(item)}\r\n          >\r\n            <Text key={index}></Text>\r\n            <Text style={styles.pesoText}>Received from {item.SenderEmail} \r\n              {item.Note ? `\\n Note:\\n ${item.Note}` : ''}\r\n            </Text>\r\n            <Text style={styles.pesoMoney}>+₱{item.transactions}</Text>\r\n            <Text style={styles.timestampText}>{item.Timestamp}</Text>\r\n          </TouchableOpacity>\r\n        )}\r\n        keyExtractor={(item) => item.id}\r\n        contentContainerStyle={styles.listContainer}\r\n      />\r\n      <View style={styles.receivedButton}>\r\n        <TouchableOpacity style={styles.ButtonContainer} onPress={onPress}>\r\n          <Text style={styles.buttonText}>Go Back Home</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <Modal\r\n        visible={modalVisible}\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        onRequestClose={closeModal}\r\n      >\r\n        <View style={styles.modalContainer}>\r\n          {selectedTransaction && (\r\n            <View style={styles.transactionModal}>\r\n              <Text style={styles.modalText}>Transaction Details</Text>\r\n              <Text style={styles.modTrans}>Transaction: ₱{selectedTransaction.transactions}</Text>\r\n              <Text style={styles.modTrans}>Sender: {selectedTransaction.SenderEmail}</Text>\r\n              <Text style={styles.modTrans}>Time: {selectedTransaction.Timestamp}</Text>\r\n              <Text style={styles.modTrans}>Note: {selectedTransaction.Note}</Text>\r\n              <TouchableOpacity style={styles.closeButton} onPress={closeModal}>\r\n                <Text style={styles.closeButtonText}>Close</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          )}\r\n        </View>\r\n      </Modal>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default NotificationsScreen;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexDirection: 'column',\r\n    justifyContent: 'flex-start',\r\n    backgroundColor: Color.blackModePrimaryDark,\r\n    justifyContent: \"center\",\r\n    position: 'absolute',\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0\r\n  },\r\n  ButtonContainer: {\r\n    marginHorizontal: 80,\r\n    backgroundColor: \"#7B61FF\",\r\n    paddingVertical: 10,\r\n    borderRadius: 15,\r\n    marginTop: 15,\r\n  },\r\n  buttonText: {\r\n    color: \"white\",\r\n    fontSize: 16,\r\n    fontFamily:FontFamily.poppinsMedium,\r\n    textAlign: \"center\",\r\n  },\r\n  receivedButton: {\r\n    padding: 10,\r\n    marginBottom: 10\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  flatlistContainer: {\r\n    padding: 20,\r\n  },\r\n  listContainer: {\r\n    paddingBottom: 16,\r\n  },\r\n  logItem: {\r\n    backgroundColor: 'rgba(255, 255, 255, 0.15)',\r\n    padding: 16,\r\n    marginBottom: 8,\r\n    borderRadius: 8,\r\n    elevation: 2,\r\n  },\r\n  highlightedLog: {\r\n    backgroundColor: '#7B61FF',\r\n    borderWidth: 2,\r\n    borderColor: '#FFA500',\r\n  },\r\n  image: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n  },\r\n  logText: {\r\n    fontSize: 16,\r\n    marginBottom: 8,\r\n    fontWeight: 'bold',\r\n  },\r\n  timestampText: {\r\n    fontSize: 12,\r\n    color: 'white',\r\n    alignSelf:'flex-end',\r\n  },\r\n  modalContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n  },\r\n  transactionModal: {\r\n    backgroundColor: 'white',\r\n    padding: 20,\r\n    borderRadius: 8,\r\n    width: '80%',\r\n  },\r\n  modalText: {\r\n    fontSize: 18,\r\n    marginBottom: 10,\r\n    fontFamily: FontFamily.poppinsBold,\r\n  },\r\n  closeButton: {\r\n    marginTop: 20,\r\n    backgroundColor: '#7B61FF',\r\n    padding: 10,\r\n    borderRadius: 8,\r\n    alignSelf: 'flex-end',\r\n  },\r\n  closeButtonText: {\r\n    color: 'white',\r\n    fontFamily: FontFamily.poppinsMedium,\r\n  },\r\n  pesoText: {\r\n    color: \"white\",\r\n    fontFamily:FontFamily.poppinsMedium,\r\n  },\r\n  pesoMoney: {\r\n    color: '#7CFC00',\r\n    alignSelf: 'flex-end',\r\n    fontSize: 20,\r\n  },\r\n  modTrans: {\r\n    fontFamily: FontFamily.poppinsMedium,\r\n    fontSize: 13,\r\n  },\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}